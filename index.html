<style>body {
    margin: 0;
    text-align: center;
    background-color: #000;
  }</style><canvas id="c"></canvas><script>function _toArray(e){return Array.isArray(e)?e:Array.from(e)}var _slicedToArray=function(){function e(e,t){var r=[],i=!0,a=!1,n=void 0;try{for(var o,c=e[Symbol.iterator]();!(i=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){a=!0,n=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw n}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(){function e(e,t){return Math.floor(Math.random()*(t+1-e)+e)}function t(t){return t[e(0,t.length-1)]}function r(){for(var t="#",r=0;r<6;r++)t+=e(0,9);return t}function i(){ie=[];for(var e=void 0,r=0;r<E*D;r++)e=0===r?U+V:r===E-1?X+V:r===E*(D-1)?U+B:r===E*D-1?X+B:t(r<E-1?[X+U,X+V+U]:E*(D-1)<r?[X+U,X+B+U]:r%E?r%E==E-1?[B+V,B+X+V]:[X+B+U+V,B+X+V,B+U+V,X+B+U,X+V+U,B+V,X+U,$]:[B+V,B+U+V]),ie[r]=e}function a(){re=[];for(var e=0;e<E*D;e++){var t=e%E,i=(e-t)/E;ie[e]!==$?(re.push([t*T,i*T,M,M,r(),e]),re.push([t*T+2*M,i*T,M,M,r(),e]),re.push([t*T,i*T+2*M,M,M,r(),e]),re.push([t*T+2*M,i*T+2*M,M,M,r(),e]),ie[e]&B||re.push([t*T+M,i*T,M,M,r(),e]),ie[e]&X||re.push([t*T,i*T+M,M,M,r(),e]),ie[e]&V||re.push([t*T+M,i*T+2*M,M,M,r(),e]),ie[e]&U||re.push([t*T+2*M,i*T+M,M,M,r(),e])):re.push([t*T+M,i*T+M,M,M,"red",e])}}function n(){F&&(q=requestAnimationFrame(n),s(),N=Date.now(),g((N-P)/1e3),P=N)}function o(e){F=e,F?(P=Date.now(),n()):cancelAnimationFrame(q)}function l(){R.drawImage(z,0,0,I,_,0,0,c.width,c.height)}function s(){switch(S){case m:C.fillStyle="white",C.fillRect(0,0,I,_),f("a Tourist in Paris",I/2,128,"64px Arial"),Math.floor(N/1e3)%2&&f("press N to start",I/2,2*_/3,"24px Arial"),f("proudly made in Canada",I/2,_-2.5*M,"24px Arial"),f("by Jerome Lecomte for JS13KGAMES 2017",I/2,_-M,"24px Arial");break;case A:C.fillStyle="white",C.fillRect(0,0,I,_),f("Tourist: person geographically and culturally",2*M,2*M,"24px Arial","left"),f("lost, trying to cross iconic sightseeings from his",2*M,4*M,"24px Arial","left"),f("bucket list before his tour bus departs.",2*M,6*M,"24px Arial","left"),f("Arrow keys or WASD/ZQSD to move around.",2*M,10*M,"24px Arial","left"),f("Touch all red squares before time runs out.",2*M,12*M,"24px Arial","left"),Math.floor(N/1e3)%2&&f("Press any key.",2*M,16*M,"24px Arial","left");break;case x:C.fillStyle="white",C.fillRect(0,0,I,_),te[H]=r(),u(te);var e=!0,t=!1,i=void 0;try{for(var a,n=re[Symbol.iterator]();!(e=(a=n.next()).done);e=!0){u(a.value)}}catch(e){t=!0,i=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw i}}var o=Math.floor(Math.ceil(se)/60),c=Math.ceil(se)-60*o;f(o+":"+(c<=9?"0":"")+c,I-M,2*M,"24px Arial","right");break;case k:C.fillStyle="white",C.fillRect(0,0,I,_),f("You "+(le?"won":"lost")+"!",I/2,128),f(ne+" out of "+ae+" sightseeings",I/2,_/2),f("press N to start new level",I/2,2*_/3,"24px Arial"),f("press R to retry same level",I/2,2*_/3+2*M,"24px Arial")}l()}function u(e){C.fillStyle=e[H],C.fillRect(Math.round(e[J]),Math.round(e[W]),e[j],e[G])}function f(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"48px Arial",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"center",n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"black";C.fillStyle=n,C.font=i,C.textAlign=a,C.fillText(e,t,r)}function h(e){var t=e*te[Z];te[J]+=(te[Q]+te[Y])*t,te[W]+=(te[L]+te[O])*t}function d(e){var t=te[J]+te[j],r=te[W]+te[G],i=e[J]+e[j],a=e[W]+e[G];return[te[J]<i&&t>e[J]&&te[W]<a&&r>e[W],t,r,i,a]}function v(e,t){var r=_slicedToArray(t,4),i=r[0],a=r[1],n=r[2],o=r[3],c=i-e[J],l=a-e[W],s=n-te[J],u=o-te[W];te[Y]&&te[O]?c<l?te[J]-=c:te[W]-=l:te[Y]&&te[L]?c<u?te[J]-=c:te[W]+=u:te[Y]?te[J]-=c:te[Q]&&te[O]?s<l?te[J]+=s:te[W]-=l:te[Q]&&te[L]?s<u?te[J]+=s:te[W]+=u:te[Q]?te[J]+=s:te[O]?te[W]-=l:te[L]&&(te[W]+=u)}function y(e){ie[e[K]]===$&&"red"===e[H]&&(e[H]="green",ne++)}function p(){ne===ae?(S=k,le=!0):se<0&&(S=k,le=!1)}function b(){i(),a(),ae=ie.reduce(function(e,t){return e+(t===$?1:0)},0),oe=!1,w()}function w(){re.forEach(function(e){ie[e[K]]===$&&(e[H]="red")}),ne=0,te[L]=te[O]=te[Q]=te[Y]=0,te[J]=te[W]=M,le=!1,ce=!1,se=ee,S=x}function g(e){switch(S){case k:ce&&w();case A:oe&&b();break;case x:se-=e,h(e);var t=!0,r=!1,i=void 0;try{for(var a,n=re[Symbol.iterator]();!(t=(a=n.next()).done);t=!0){var o=a.value,c=d(o),l=_toArray(c),s=l[0],u=l.slice(1);s&&(v(o,u),y(o))}}catch(e){r=!0,i=e}finally{try{!t&&n.return&&n.return()}finally{if(r)throw i}}p()}}var m=0,A=1,x=2,k=3,S=m,M=20,T=3*M,E=10,D=8,R=c.getContext("2d"),I=E*T,_=D*T,z=c.cloneNode(),C=z.getContext("2d"),N=void 0,P=void 0,q=void 0,F=!0,J=0,W=1,j=2,G=3,H=4,K=5,L=5,O=6,Q=7,Y=8,Z=9,B=1,U=2,V=4,X=8,$=31,ee=60,te=[M,M,10,10,"blue",0,0,0,0,100],re=void 0,ie=void 0,ae=void 0,ne=void 0,oe=void 0,ce=void 0,le=void 0,se=void 0;onload=function(e){document.title="A Tourist in Paris",z.width=I,z.height=_,onresize(),o(!0)},document.onvisibilitychanged=function(e){o(!e.target.hidden)},onresize=onrotate=function(){var e=Math.min(innerWidth/I,innerHeight/_);c.width=I*e,c.height=_*e,[R,C].forEach(function(e){e.mozImageSmoothingEnabled=e.msImageSmoothingEnabled=e.imageSmoothingEnabled=!1})},onkeydown=function(e){switch(e.preventDefault(),S){case x:switch(e.which){case 37:case 65:case 81:te[Q]=-1;break;case 38:case 90:case 87:te[L]=-1;break;case 39:case 68:te[Y]=1;break;case 40:case 83:te[O]=1}}},onkeyup=function(e){switch(e.preventDefault(),S){case m:switch(e.which){case 13:case 78:S=A}break;case A:oe=!0;break;case x:switch(e.which){case 37:case 65:case 81:te[Q]=0;break;case 38:case 90:case 87:te[L]=0;break;case 39:case 68:te[Y]=0;break;case 40:case 83:te[O]=0}break;case k:switch(e.which){case 13:case 78:oe=!0;break;case 82:ce=!0}}}}();
//# sourceMappingURL=game.js.map</script>