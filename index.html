<style>body {
    margin: 0;
    text-align: center;
    background-color: #000;
    touch-action: none;
  }</style><canvas id="c"></canvas><script>function _toArray(e){return Array.isArray(e)?e:Array.from(e)}var _slicedToArray=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(){function e(e,t){return Math.floor(Math.random()*(t+1-e)+e)}function t(t){return t[e(0,t.length-1)]}function n(){return"#"+r()+r()+r()}function r(){for(var t="",n=0;n<2;n++)t+=e(0,9);return t}function a(){return"#"+r()+"0000"}function o(){return"#00"+r()+"00"}function i(){ge=[];for(var e=void 0,n=0;n<F*W;n++)e=0===n?he+le:n===F-1?fe+le:n===F*(W-1)?he+ue:n===F*W-1?fe+ue:t(n<F-1?[fe+he,fe+le+he]:F*(W-1)<n?[fe+he,fe+ue+he]:n%F?n%F==F-1?[ue+le,ue+fe+le]:[fe+ue+he+le,ue+fe+le,ue+he+le,fe+ue+he,fe+le+he,ue+le,fe+he,ve]:[ue+le,ue+he+le]),ge[n]=e}function s(){ye=[];for(var e=0;e<F*W;e++){var t=e%F,r=(e-t)/F;ge[e]!==ve?(ye.push([t*E,r*E,q,q,n(),e]),ye.push([t*E+2*q,r*E,q,q,n(),e]),ye.push([t*E,r*E+2*q,q,q,n(),e]),ye.push([t*E+2*q,r*E+2*q,q,q,n(),e]),ge[e]&ue||ye.push([t*E+q,r*E,q,q,n(),e]),ge[e]&fe||ye.push([t*E,r*E+q,q,q,n(),e]),ge[e]&le||ye.push([t*E+q,r*E+2*q,q,q,n(),e]),ge[e]&he||ye.push([t*E+2*q,r*E+q,q,q,n(),e])):ye.push([t*E+q,r*E+q,q,q,a(),e,!1])}}function u(){J&&(B=requestAnimationFrame(u),v(),H=Date.now(),j((H-Z)/1e3),Z=H)}function h(e){J=e,J?(Z=Date.now(),u()):cancelAnimationFrame(B)}function l(e){return new Promise(function(t){var n=new Image;n.addEventListener("load",function(){t(n)}),n.src=e})}function f(){R.drawImage(Y,0,0,U,X,0,0,c.width,c.height)}function v(){switch(T){case x:Q.fillStyle=Se,Q.fillRect(0,0,U,X),y("a tourist in paris",U/2,112,De,4),Math.floor(H/1e3)%2&&y("press n or tap screen to start",U/2,X/2,De),y("proudly made in canada",U/2,X-80,De),y("by jerome lecomte",U/2,X-56,De),y("for js13kgames 2017",U/2,X-32,De);break;case D:Q.fillStyle=je,Q.fillRect(0,0,U,X),y("tourist: person geographically and",16,32),y("culturally lost, trying to cross",16,56),y("iconic monuments off his bucket",16,80),y("list before his tour bus departs.",16,104),y("arrow keys, wasd/zqsd or tap",16,176),y("screen to move.",16,200),y("visit all blinking monuments",16,224),y("before time runs out.",16,248),Math.floor(H/1e3)%2&&y("press any key or tap screen.",16,320);break;case O:var e=!0,t=!1,r=void 0;try{for(var i,c=ye[Symbol.iterator]();!(e=(i=c.next()).done);e=!0){var s=i.value;ge[s[ne]]===ve&&(s[te]=s[ae]?o():a(),m(s,C))}}catch(e){t=!0,r=e}finally{try{!e&&c.return&&c.return()}finally{if(t)throw r}}Q.drawImage(z,G,N,U,X,0,0,U,X),me[te]=n(),m(me);var u=Math.floor(Math.ceil(Me)/60),h=Math.ceil(Me)-60*u;y("bus leaving in "+u+":"+(h<=9?"0":"")+h,U-16,32,Oe),y(Ae+"/"+we+" monuments visited",16,X-32);break;case K:Q.fillStyle=Ie,Q.fillRect(0,0,U,X),y("you "+(ke?"won":"lost")+"!",U/2,112,De,4),y(Ae+" out of "+we,U/2,X/2-32,De,3),y("monuments visited",U/2,X/2,De,3),y("press r to retry same level",U/2,2*X/3,De),y("press n to start new level",U/2,2*X/3+32,De),y("press t to tweet your score",U/2,2*X/3+56,De)}f()}function d(){C.fillStyle="white",C.fillRect(0,0,z.width,z.height);var e=!0,t=!1,n=void 0;try{for(var r,a=ye[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){m(r.value,C)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}function m(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q;n.fillStyle=e[te];var r=e[L]-(e===me?G:0),a=e[_]-(e===me?N:0),o=e!==me&&ge[e[ne]]!==ve?t([0,1,2,3,4,5]):0;n.fillRect(Math.round(r-o),Math.round(a-o),e[$]+2*o,e[ee]+2*o)}function y(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xe,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=a*Ke,i=e.length*o,c=r===Oe?i:r===De?i/2:0,s=0;s<e.length;s++)Q.drawImage(Te,Pe.indexOf(e[s])*Ke,0,Ke,Ke,t+s*o-c,n,o,o)}function g(e){var t=e*me[se];me[L]+=(me[ie]+me[ce])*t,me[_]+=(me[re]+me[oe])*t}function w(e){var t=me[L]+me[$],n=me[_]+me[ee],r=e[L]+e[$],a=e[_]+e[ee];return[me[L]<r&&t>e[L]&&me[_]<a&&n>e[_],t,n,r,a]}function A(e,t){var n=_slicedToArray(t,4),r=n[0],a=n[1],o=n[2],i=n[3],c=r-e[L],s=a-e[_],u=o-me[L],h=i-me[_];me[ce]&&me[oe]?c<s?me[L]-=c:me[_]-=s:me[ce]&&me[re]?c<h?me[L]-=c:me[_]+=h:me[ce]?me[L]-=c:me[ie]&&me[oe]?u<s?me[L]+=u:me[_]-=s:me[ie]&&me[re]?u<h?me[L]+=u:me[_]+=h:me[ie]?me[L]+=u:me[oe]?me[_]-=s:me[re]&&(me[_]+=h)}function p(e){ge[e[ne]]!==ve||e[ae]||(e[ae]=!0,Ae++)}function b(){0<G&&me[L]<G+V?G=Math.max(0,me[L]-V):G<z.width-U&&me[L]+me[$]>G+U-V&&(G=Math.min(z.width-U,me[L]+me[$]-U+V)),0<N&&me[_]<N+V?N=Math.max(0,me[_]-V):N<z.height-X&&me[_]+me[ee]>N+X-V&&(N=Math.min(z.height-X,me[_]+me[ee]-X+V))}function k(){Ae===we?(T=K,ke=!0):Me<0&&(T=K,ke=!1)}function M(){i(),s(),d(),we=ge.reduce(function(e,t){return e+(t===ve?1:0)},0),pe=!1,S()}function S(){ye.forEach(function(e){ge[e[ne]]===ve&&(e[ae]=!1)}),Ae=0,G=N=me[re]=me[oe]=me[ie]=me[ce]=0,me[L]=me[_]=q,ke=!1,be=!1,Me=de,Ie=n(),T=O}function j(e){switch(T){case K:be&&S();case D:pe&&M();break;case O:Me-=e,g(e);var t=!0,n=!1,r=void 0;try{for(var a,o=ye[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value,c=w(i),s=_toArray(c),u=s[0],h=s.slice(1);u&&(A(i,h),p(i))}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}b(),k()}}function I(e){return[e.pageX||e.changedTouches[0].pageX,e.pageY||e.changedTouches[0].pageY]}function P(e,t){var n=(e-Ee)/Ee,r=(t-Fe)/Fe;me[ie]=Math.min(n,0),me[ce]=Math.max(n,0),me[re]=Math.min(r,0),me[oe]=Math.max(r,0)}var x=0,D=1,O=2,K=3,T=x,q=80,E=3*q,F=14,W=10,V=200,G=0,N=0,R=c.getContext("2d"),U=600,X=480,z=c.cloneNode(),C=z.getContext("2d"),Y=c.cloneNode(),Q=Y.getContext("2d"),H=void 0,Z=void 0,B=void 0,J=!0,L=0,_=1,$=2,ee=3,te=4,ne=5,re=5,ae=6,oe=6,ie=7,ce=8,se=9,ue=1,he=2,le=4,fe=8,ve=31,de=120,me=[q,q,20,20,"blue",0,0,0,0,200],ye=void 0,ge=void 0,we=void 0,Ae=void 0,pe=void 0,be=void 0,ke=void 0,Me=void 0,Se=n(),je=n(),Ie=n(),Pe="abcdefghijklmnopqrstuvwxyz0123456789.:!-%,/",xe=0,De=1,Oe=2,Ke=8,Te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVgAAAAICAYAAAC8lecDAAACCUlEQVR42uVa2WoDMQxc6Fvf+v8fmzYlC5vFOmZGsl26EILjlSzrGMuKjq/Pjwf7OV6PN8/SIjJk56rWZOW5y4HKMqKx+GRs48mh0u/4ye6pgmdGP4osGVkRX2R1we7/KH4U/pn4YmX5HVjP+VLH/NUBZq0fjSvWj/iPADZLPxpbOoz0e3eoavoO+6weIzqq0i8yn/WN6J2Mbav2XwmwDO+TztKnLAcaAN0AdP39PwJshf7+6vwKgFxFjyQYUZx4vsHE1z0DrrSfArJeVukBYybDjw6aaH2TvsNBPANWAITF31Jk5gQe8RkZqAKAFYDdOQPsDlCGPuOjqH9E2R8aP1kAZeTP8MgCvOX/Ix4/W0vFf1WGGgFslEEjcRqt//bO7AymM4NlADACWJa/F4DeAXH/3jUDiwAIOQgr/MvSY8UV1rIhkoGyWSQLwKz9UZDx/OUE2ch/kAyRmWfsqwD42/zsK3ZnBsvUMGeXSBT9VK6fqfFVXHEjB1VrfKr+Vflml6CQOKjwP0U/1ywWATkU4NQSgZc0ePXaFDivchAlQHYIAPWKyAKs8ieX18nQVWNkr3AdAGvpb+cDgNGvmqFX2O8Jrl1XcGYeKT14QIrKLbUxrWzTQovYShsO2p4ys80IbbPJtrkorT9Mm47SBqTYv7tNqdsXojawqjaq7vnOEkG6pcrhk9nXiP834OoPrkvjIKMAAAAASUVORK5CYII=";onload=function(e){document.title="A Tourist in Paris",z.width=F*E,z.height=W*E,Y.width=U,Y.height=X,onresize(),l(Te).then(function(e){Te=e,h(!0)})},document.onvisibilitychanged=function(e){h(!e.target.hidden)},onresize=onrotate=function(){var e=Math.min(innerWidth/U,innerHeight/X);c.width=U*e,c.height=X*e,[R,C,Q].forEach(function(e){e.mozImageSmoothingEnabled=e.msImageSmoothingEnabled=e.imageSmoothingEnabled=!1}),Ee=innerWidth/2,Fe=innerHeight/2},onkeydown=function(e){switch(e.preventDefault(),T){case O:switch(e.which){case 37:case 65:case 81:me[ie]=-1;break;case 38:case 90:case 87:me[re]=-1;break;case 39:case 68:me[ce]=1;break;case 40:case 83:me[oe]=1}}},onkeyup=function(e){switch(e.preventDefault(),T){case x:switch(e.which){case 13:case 78:T=D}break;case D:pe=!0;break;case O:switch(e.which){case 37:case 65:case 81:me[ie]=0;break;case 38:case 90:case 87:me[re]=0;break;case 39:case 68:me[ce]=0;break;case 40:case 83:me[oe]=0}break;case K:switch(e.which){case 13:case 78:pe=!0;break;case 82:be=!0;break;case 84:open("https://twitter.com/intent/tweet?text=I%20just%20visited%20"+Ae+"%20monument"+(Ae>1?"s":"")+"%20in%20A%20Tourist%20In%20Paris,%20a%20%23js13k%20game%20by%20%40herebefrogs%20https%3A%2F%2Fgoo.gl%2FKPNCyr","_blank")}}};var qe=!1,Ee=void 0,Fe=void 0;ontouchstart=onpointerdown=function(e){switch(e.preventDefault(),qe=!0,T){case O:var t=I(e),n=_slicedToArray(t,2);P(n[0],n[1])}},ontouchmove=onpointermove=function(e){switch(e.preventDefault(),T){case O:if(qe){var t=I(e),n=_slicedToArray(t,2);P(n[0],n[1])}}},ontouchend=onpointerup=function(e){switch(e.preventDefault(),qe=!1,T){case x:T=D;break;case D:case K:pe=!0;break;case O:me[re]=0,me[oe]=0,me[ie]=0,me[ce]=0}}}();
//# sourceMappingURL=game.js.map</script>