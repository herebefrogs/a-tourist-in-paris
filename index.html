<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta name=monetization content=$ilp.uphold.com/2kD7NjJBDjBb><style>body{margin:0;text-align:center;background:#000}body,canvas{touch-action:none;user-select:none}</style><canvas id=c></canvas><script>(()=>{var e,t=/iPhone|iPad|Android/i.test(navigator.userAgent),o=Math.random;function n(e=!1){let t=new URLSearchParams(location.search).get("seed");if(!t||e){t=btoa(o()).slice(3,9);const e=new URL(location);e.searchParams.set("seed",t),history.pushState({},"",e)}return t}function i(e,t){return Math.floor(o()*(t+1-e)+e)}function a(e){return e[i(0,e.length-1)]}function h(e,t,o){return 0>o?e:o>1?t:e*(1-o)+t*o}function r(e=1,t=14){return i(e,t).toString(16)}function s(){return`#${r()}${r()}${r()}`}function m(){return`#${r()}00`}function u(){return"#00"+r(4,15)}function d(t,o,n,i,a=0,h=2){const r=8*h,s=t.length*(r+1)-1,c=2===a?s:1===a?s/2:0;[...t].forEach(((t,a)=>{o.drawImage(e,8*"abcdefghijklmnopqrstuvwxyz0123456789.:!-%,/".indexOf(t),0,8,8,n+a*(r+1)-c,i,r,r)}))}var v,l,y,w,g,f,p,b,x,k,R,E,M,A,D,X,Y=[38,38,40,40,37,39,37,39,66,65],K=0,L=0,U=!1,P="wasd",S=c.getContext("2d"),z=c.cloneNode(),j=z.getContext("2d"),$=c.cloneNode(),T=$.getContext("2d");$.width=640,$.height=480;var F,I,B,O,N,Q,G,C,W=!1,Z=0,q=0,V=!0;function J(){U=!0}function H(e=0,t=0,o=D,n,i){let h;switch(i){case"hero":h={moveDown:0,moveLeft:0,moveRight:0,moveUp:0,moveX:0,moveY:0,outline:0,type:i,speed:PLAYER_SPEED};break;case"monument":h={outline:0,type:i,visited:!1};break;default:h={outline:a(M)}}return{color:n,h:o,w:o,x:e,y:t,...h}}function _(){o=(e=>{for(var t=0,o=2166136261;e.length>t;t++)o=Math.imul(o^e.charCodeAt(t),16777619);o+=o<<13,o^=o>>>7,o+=o<<3,o^=o>>>17;let n=(o+=o<<5)>>>0,i=()=>(2**31-1&(n=Math.imul(48271,n)))/2**31;return i(),i})(l),A=0===v?10:1===v?15:20,z.width=14*(X=3*(D=0===v?20:1===v?40:80)),z.height=10*X,F=I=0===v?100:1===v?150:200,B=$.width-F,O=$.height-I,PLAYER_SPEED=0===v?100:1===v?150:200,M=0===v?[0,1,2]:1===v?[0,1,2,3]:[0,1,2,3,4,5],k=s(),R=s(),E=s(),f=!1,b=0,y=120*(U?1.2:1),Z=q=0,w=H(D,D,A,"blue","hero"),(()=>{const e=[];let t;for(let o=0;140>o;o++)t=0===o?6:13===o?12:126===o?3:139===o?9:a(13>o?[10,14]:o>126?[10,11]:o%14?o%14==13?[5,13]:[15,13,7,11,14,5,10,"monument"]:[5,7]),e[o]=t;g=[];for(let t=0;140>t;t++){const o=t%14,n=(t-o)/14;"monument"!==e[t]?(g.push(H(o*X,n*X,D,s())),g.push(H(o*X+2*D,n*X,D,s())),g.push(H(o*X,n*X+2*D,D,s())),g.push(H(o*X+2*D,n*X+2*D,D,s())),1&e[t]||g.push(H(o*X+D,n*X,D,s())),8&e[t]||g.push(H(o*X,n*X+D,D,s())),4&e[t]||g.push(H(o*X+D,n*X+2*D,D,s())),2&e[t]||g.push(H(o*X+2*D,n*X+D,D,s()))):g.push(H(o*X+D,n*X+D,D,m(),"monument"))}const o=g.filter((e=>"monument"===e.type));bus=a(o),bus.type="bus",bus.color=u()})(),x=g.filter((e=>"monument"===e.type)),p=x.length,j.fillStyle="#fff",j.fillRect(0,0,z.width,z.height),g.forEach(ee),L=2}function ee(e){te(e,j,0,0)}function te(e,t=T,o=Z,n=q){t.fillStyle=e.color,t.fillRect(Math.round(e.x-o-e.outline),Math.round(e.y-n-e.outline),e.w+2*e.outline,e.h+2*e.outline)}function oe(){V&&(C=requestAnimationFrame(oe),(()=>{const e=$.width/2,o=$.height/2,n=2*$.height/3;switch(L){case 0:T.fillStyle=k,T.fillRect(0,0,$.width,$.height),d("a tourist in paris",T,e,112,1,4),t?d("tap to start",T,e,o,1):(d("press e for easy",T,e,o,1),d("m for medium, h for hard",T,e,o+24,1)),d("proudly made in canada",T,e,$.height-80,1),d("by jerome lecomte",T,e,$.height-56,1),d("for js13kgames 2017",T,$.width/2,$.height-32,1);break;case 1:T.fillStyle=R,T.fillRect(0,0,$.width,$.height),d("tourist: noun. person geographically",T,16,32),d("and culturally lost, trying to cross",T,16,56),d("iconic monuments off their bucket",T,16,80),d("list before their tour bus departs.",T,16,104),d("controls:",T,16,176),d(t?"swipe screen to move":`arrow keys or ${P} to move.`,T,$.width-16,200,2),d("goal:",T,16,248),d("touch all red blinking squares",T,$.width-16,272,2),d("then touch the blue square",T,$.width-16,296,2),d("before time runs out.",T,$.width-16,320,2),Math.floor(N/1e3)%2&&d(t?"tap to start.":"press any key to start.",T,16,$.height-32);break;case 2:W?(T.fillStyle="#fff",T.fillRect(0,0,$.width,$.height),g.forEach((e=>te(e)))):(x.forEach(ee),ee(bus),T.drawImage(z,Z,q,$.width,$.height,0,0,$.width,$.height)),te(w),(()=>{const e=Math.floor(Math.ceil(y)/60),t=Math.ceil(y)-60*e;d(`bus leaving in ${e}:${t>9?"":"0"}${t}`,T,$.width-8,8,2)})(),d(`${b}/${p} monuments visited`,T,16,$.height-32,0);break;case 3:T.fillStyle=E,T.fillRect(0,0,$.width,$.height),d("you saw",T,e,o-128,1,2),d(` ${b} out of ${p} monuments`,T,e,o-96,1,3),d("before",T,e,o-52,1,2),d((f?"catch":"miss")+"ing your bus!",T,e,o-18,1,3),d("press r to retry same level",T,e,n,1),d("press n to start new level",T,e,n+24,1),d("press t to tweet your score",T,e,n+48,1)}S.drawImage($,0,0,$.width,$.height,0,0,c.width,c.height)})(),N=Date.now(),Q=(N-G)/1e3,(()=>{switch(L){case 2:y-=Q,se?(w.moveX=w.moveLeft+w.moveRight,w.moveY=w.moveUp+w.moveDown):(w.moveX=w.moveLeft||w.moveRight?(w.moveLeft>w.moveRight?-1:1)*h(0,1,(N-Math.max(w.moveLeft,w.moveRight))/200):0,w.moveY=w.moveDown||w.moveUp?(w.moveUp>w.moveDown?-1:1)*h(0,1,(N-Math.max(w.moveUp,w.moveDown))/200):0),(()=>{const e=w.speed*Q*(w.moveX&&w.moveY?.7071067811865476:1);w.x+=e*w.moveX,w.y+=e*w.moveY})(),w.color=s(),g.forEach((e=>{const{collided:t,...o}=(e=>{const t={entity1MaxX:w.x+w.w,entity1MaxY:w.y+w.h,entity2MaxX:e.x+e.w,entity2MaxY:e.y+e.h};return t.collided=t.entity2MaxX>w.x&&t.entity1MaxX>e.x&&t.entity2MaxY>w.y&&t.entity1MaxY>e.y,t})(e);t&&((e,t)=>{const{entity1MaxX:o,entity1MaxY:n,entity2MaxX:i,entity2MaxY:a}=t,h=o-e.x,r=n-e.y,s=i-w.x,c=a-w.y;w.moveX>0&&w.moveY>0?r>h?w.x-=h:w.y-=r:w.moveX>0&&0>w.moveY?c>h?w.x-=h:w.y+=c:w.moveX>0?w.x-=h:0>w.moveX&&w.moveY>0?r>s?w.x+=s:w.y-=r:0>w.moveX&&0>w.moveY?c>s?w.x+=s:w.y+=c:0>w.moveX?w.x+=s:w.moveY>0?w.y-=r:0>w.moveY&&(w.y+=c)})(e,o),"monument"!==e.type||e.visited||(e.color=m(),t&&(e.visited=!0,e.color=`#0${r()}0`,b++)),"bus"!==e.type||e.visited||(e.color=u(),t&&(e.visited=!0)),W&&(e.outline=a(M))})),0>w.x?w.x=0:w.x>z.width-w.w&&(w.x=z.width-w.w),0>w.y?w.y=0:w.y>z.height-w.h&&(w.y=z.height-w.h),Z>0&&Z+F>w.x?Z=Math.max(0,w.x-F):z.width-$.width>Z&&w.x+w.w>Z+B&&(Z=Math.min(z.width-$.width,w.x+w.w-B)),q>0&&q+I>w.y?q=Math.max(0,w.y-I):z.height-$.height>q&&w.y+w.h>q+O&&(q=Math.min(z.height-$.height,w.y+w.h-O)),bus.visited?(L=3,f=!0):0>y&&(L=3,f=!1)}})(),G=N)}function ne(e){(V=e)?(G=Date.now(),oe()):cancelAnimationFrame(C)}onload=async()=>{document.title="A Tourist in Paris",onresize(),(e=>{function t(){document.monetization.removeEventListener("monetizationstart",t),e()}document.monetization&&("started"===document.monetization.state?t():"pending"===document.monetization.state&&document.monetization.addEventListener("monetizationstart",t))})(J),l=n(),k=s(),R=s(),await(async()=>{e=await new Promise((e=>{var t=new Image;t.onload=()=>{e(t)},t.src="data:image/webp;base64,UklGRngBAABXRUJQVlA4TGwBAAAvV8EBEB8gFkz258+bhkAgiWF/1wkEKAr/L5v/APCvBpIbwI0jiYD/0n9D4RzKZze0EtD672FnsP8Ngdyjj58hNIFh2ZtCRP8Vtm3bOED3UJ1eERFttqgREbO1GQQQS+Jca1QaDwpGnBHXek3SGi0ZiKOKiOS+1ykiE0al8gXudIFjgbt3hdJ4Ep0ErBMN1BXWC3OkRhF58Q85zJn/+T/RPjuUJ4IdxhW2mu944p2YTGRbRpntp23LxmRPIn96wL69T4OR7MSV9+Mr+g77pvjQathhF4OFXX7Bsz1K16GjDIXhpHBLuUER/vfED/tmKzn49W963N9hl/2yr+ydbepfYNuSZdeeWwu7zQXY28P7nPO8Q2GDsgZjAj/kZN2TbxR8Xi3b2cFjK1jcT5YcORVO8q5eO+VmlE5yP3sXdKRjyfRpKEvEf4/Fpc2TgyofNGvMiMNBco2Yed81rsTFPzgy6rVd67Hkjkh7vUoT"}))})(),/^fr/i.test(navigator.language)&&(P="zqsd"),addEventListener("keydown",onkeydown),addEventListener("keyup",onkeyup),ne(!0)},onresize=onrotate=()=>{const e=Math.min(innerWidth/$.width,innerHeight/$.height);c.width=$.width*e,c.height=$.height*e,S.imageSmoothingEnabled=j.imageSmoothingEnabled=T.imageSmoothingEnabled=!1},document.onvisibilitychange=e=>{ne(!e.target.hidden)},onkeydown=e=>{if(e.preventDefault(),!e.repeat)switch(L){case 2:switch(e.code){case"ArrowLeft":case"KeyA":case"KeyQ":w.moveLeft=N;break;case"ArrowUp":case"KeyW":case"KeyZ":w.moveUp=N;break;case"ArrowRight":case"KeyD":w.moveRight=N;break;case"ArrowDown":case"KeyS":w.moveDown=N;break;case"KeyP":ne(!V)}}},onkeyup=e=>{switch(L){case 0:if(e.which===Y[K]&&10!==K)return void(10==++K&&(W=!0));switch(e.code){case"KeyE":v=0,L=1;break;case"KeyM":v=1,L=1;break;case"KeyH":v=2,L=1}break;case 1:_();break;case 2:switch(e.code){case"ArrowLeft":case"KeyA":case"KeyQ":w.moveRight&&(w.moveRight=N),w.moveLeft=0;break;case"ArrowRight":case"KeyD":w.moveLeft&&(w.moveLeft=N),w.moveRight=0;break;case"ArrowUp":case"KeyW":case"KeyZ":w.moveDown&&(w.moveDown=N),w.moveUp=0;break;case"ArrowDown":case"KeyS":w.moveUp&&(w.moveUp=N),w.moveDown=0}break;case 3:switch(e.code){case"Enter":case"KeyN":l=n(!0),_();break;case"KeyR":_();break;case"KeyT":open(`https://twitter.com/intent/tweet?text=I%20visited%20${b}%20monument${b>1?"s":""}%20before%20${f?"catch":"miss"}ing%20my%20bus%20in%20A%20Tourist%20In%20Paris,%20a%20%23js13k%20game%20by%20%40herebefrogs%0A%0ATry%20to%20beat%20my%20score%3A%20${encodeURIComponent(location)}`,"_blank")}}};var ie=0,ae=0,he=0,re=0,se=!1;function ce(e){return[e.pageX||e.changedTouches[0].pageX,e.pageY||e.changedTouches[0].pageY]}ontouchstart=onpointerdown=e=>{switch(e.preventDefault(),L){case 2:se=!0,[he,re]=[ie,ae]=ce(e)}},ontouchmove=onpointermove=e=>{switch(e.preventDefault(),L){case 2:ie&&ae&&(([e,t])=>{e>he?w.moveRight=h(0,1,((he=e)-ie)/30):ie>e?w.moveLeft=-h(0,1,(he-(ie=e))/30):he>e&&w.moveX>0?(ie=e,w.moveRight=0):e>ie&&0>w.moveX&&(he=e,w.moveLeft=0),t>re?w.moveDown=h(0,1,((re=t)-ae)/30):ae>t?w.moveUp=-h(0,1,(re-(ae=t))/30):re>t&&w.moveY>0?(ae=t,w.moveDown=0):t>ae&&0>w.moveY&&(re=t,w.moveUp=0)})(ce(e))}},ontouchend=onpointerup=e=>{switch(e.preventDefault(),L){case 0:L=1;break;case 1:case 3:_();break;case 2:se=!1,w.moveLeft=w.moveRight=w.moveDown=w.moveUp=0,ie=ae=he=re=0}}})();</script>