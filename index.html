<style>body {
    margin: 0;
    text-align: center;
    background-color: #000;
    touch-action: none;
  }</style><canvas id="c"></canvas><script>function _toArray(e){return Array.isArray(e)?e:Array.from(e)}var _slicedToArray=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(){function e(e,t){return Math.floor(Math.random()*(t+1-e)+e)}function t(t){return t[e(0,t.length-1)]}function n(){return"#"+r()+r()+r()}function r(){for(var t="",n=0;n<2;n++)t+=e(0,9);return t}function a(){return"#"+r()+"0000"}function o(){return"#00"+r()+"00"}function i(){Se=[];for(var e=void 0,n=0;n<U*X;n++)e=0===n?ge+we:n===U-1?Ae+we:n===U*(X-1)?ge+ye:n===U*X-1?Ae+ye:t(n<U-1?[Ae+ge,Ae+we+ge]:U*(X-1)<n?[Ae+ge,Ae+ye+ge]:n%U?n%U==U-1?[ye+we,ye+Ae+we]:[Ae+ye+ge+we,ye+Ae+we,ye+ge+we,Ae+ye+ge,Ae+we+ge,ye+we,Ae+ge,be]:[ye+we,ye+ge+we]),Se[n]=e}function s(){Me=[];for(var e=0;e<U*X;e++){var t=e%U,r=(e-t)/U;Se[e]!==be?(Me.push([t*N,r*N,G,G,n(),e]),Me.push([t*N+2*G,r*N,G,G,n(),e]),Me.push([t*N,r*N+2*G,G,G,n(),e]),Me.push([t*N+2*G,r*N+2*G,G,G,n(),e]),Se[e]&ye||Me.push([t*N+G,r*N,G,G,n(),e]),Se[e]&Ae||Me.push([t*N,r*N+G,G,G,n(),e]),Se[e]&we||Me.push([t*N+G,r*N+2*G,G,G,n(),e]),Se[e]&ge||Me.push([t*N+2*G,r*N+G,G,G,n(),e])):Me.push([t*N+G,r*N+G,G,G,a(),e,!1])}}function u(){ne&&(te=requestAnimationFrame(u),v(),$=Date.now(),I(($-ee)/1e3),ee=$)}function h(e){ne=e,ne?(ee=Date.now(),u()):cancelAnimationFrame(te)}function l(e){return new Promise(function(t){var n=new Image;n.addEventListener("load",function(){t(n)}),n.src=e})}function f(){Q.drawImage(L,0,0,H,Z,0,0,c.width,c.height)}function v(){switch(q){case D:_.fillStyle=Ke,_.fillRect(0,0,H,Z),y("a tourist in paris",H/2,112,We,4),Math.floor($/1e3)%2&&(y("press e for easy",H/2,Z/2,We),y("m for medium, h for hard",H/2,Z/2+24,We),y("or tap screen to start",H/2,Z/2+48,We)),y("proudly made in canada",H/2,Z-80,We),y("by jerome lecomte",H/2,Z-56,We),y("for js13kgames 2017",H/2,Z-32,We);break;case O:_.fillStyle=Te,_.fillRect(0,0,H,Z),y("tourist: person geographically and",16,32),y("culturally lost, trying to cross",16,56),y("iconic monuments off his bucket",16,80),y("list before his tour bus departs.",16,104),y("arrow keys, wasd/zqsd or tap",16,176),y("screen to move.",16,200),y("visit all blinking monuments",16,224),y("before time runs out.",16,248),Math.floor($/1e3)%2&&y("press any key or tap screen.",16,320);break;case K:var e=!0,t=!1,r=void 0;try{for(var o,i=Me[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var c=o.value;Se[c[se]]===be&&(c[he]||(c[ce]=a()),m(c,J))}}catch(e){t=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}_.drawImage(B,C,Y,H,Z,0,0,H,Z),ke[ce]=n(),m(ke);var s=Math.floor(Math.ceil(Oe)/60),u=Math.ceil(Oe)-60*s;y("bus leaving in "+s+":"+(u<=9?"0":"")+u,H-16,32,Ve),y(Ie+"/"+je+" monuments visited",16,Z-32);break;case T:_.fillStyle=qe,_.fillRect(0,0,H,Z),y("you "+(De?"won":"lost")+"!",H/2,112,We,4),y(Ie+" out of "+je,H/2,Z/2-32,We,3),y("monuments visited",H/2,Z/2,We,3),y("press r to retry same level",H/2,2*Z/3,We),y("press n to start new level",H/2,2*Z/3+24,We),y("press t to tweet your score",H/2,2*Z/3+48,We)}f()}function d(){J.fillStyle="white",J.fillRect(0,0,B.width,B.height);var e=!0,t=!1,n=void 0;try{for(var r,a=Me[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){m(r.value,J)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}function m(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_;n.fillStyle=e[ce];var r=e[re]-(e===ke?C:0),a=e[ae]-(e===ke?Y:0),o=e!==ke&&Se[e[se]]!==be?t(R):0;n.fillRect(Math.round(r-o),Math.round(a-o),e[oe]+2*o,e[ie]+2*o)}function y(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Fe,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=a*Ge,i=e.length*o,c=r===Ve?i:r===We?i/2:0,s=0;s<e.length;s++)_.drawImage(Ne,Ee.indexOf(e[s])*Ge,0,Ge,Ge,t+s*o-c,n,o,o)}function g(e){var t=e*ke[de];ke[re]+=(ke[fe]+ke[ve])*t,ke[ae]+=(ke[ue]+ke[le])*t}function w(e){var t=ke[re]+ke[oe],n=ke[ae]+ke[ie],r=e[re]+e[oe],a=e[ae]+e[ie];return[ke[re]<r&&t>e[re]&&ke[ae]<a&&n>e[ae],t,n,r,a]}function A(e,t){var n=_slicedToArray(t,4),r=n[0],a=n[1],o=n[2],i=n[3],c=r-e[re],s=a-e[ae],u=o-ke[re],h=i-ke[ae];ke[ve]&&ke[le]?c<s?ke[re]-=c:ke[ae]-=s:ke[ve]&&ke[ue]?c<h?ke[re]-=c:ke[ae]+=h:ke[ve]?ke[re]-=c:ke[fe]&&ke[le]?u<s?ke[re]+=u:ke[ae]-=s:ke[fe]&&ke[ue]?u<h?ke[re]+=u:ke[ae]+=h:ke[fe]?ke[re]+=u:ke[le]?ke[ae]-=s:ke[ue]&&(ke[ae]+=h)}function b(e){Se[e[se]]!==be||e[he]||(e[he]=!0,e[ce]=o(),Ie++)}function p(){0<C&&ke[re]<C+z?C=Math.max(0,ke[re]-z):C<B.width-H&&ke[re]+ke[oe]>C+H-z&&(C=Math.min(B.width-H,ke[re]+ke[oe]-H+z)),0<Y&&ke[ae]<Y+z?Y=Math.max(0,ke[ae]-z):Y<B.height-Z&&ke[ae]+ke[ie]>Y+Z-z&&(Y=Math.min(B.height-Z,ke[ae]+ke[ie]-Z+z))}function k(){Ie===je?(q=T,De=!0):Oe<0&&(q=T,De=!1)}function M(){V=W===E?10:W===F?15:20,G=W===E?20:W===F?40:80,N=3*G,B.width=U*N,B.height=X*N,z=W===E?100:W===F?150:200,me=W===E?100:W===F?150:200,ke=[G,G,V,V,"blue",0,0,0,0,me],R=W===E?[0,1,2]:W===F?[0,1,2,3]:[0,1,2,3,4,5]}function S(){M(W),i(),s(),d(),je=Se.reduce(function(e,t){return e+(t===be?1:0)},0),Pe=!1,j()}function j(){Me.forEach(function(e){Se[e[se]]===be&&(e[he]=!1)}),Ie=0,C=Y=ke[ue]=ke[le]=ke[fe]=ke[ve]=0,ke[re]=ke[ae]=G,De=!1,xe=!1,Oe=pe,qe=n(),q=K}function I(e){switch(q){case T:xe&&j();case O:Pe&&S();break;case K:Oe-=e,g(e);var t=!0,n=!1,r=void 0;try{for(var a,o=Me[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value,c=w(i),s=_toArray(c),u=s[0],h=s.slice(1);u&&(A(i,h),b(i))}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}p(),k()}}function P(e){return[e.pageX||e.changedTouches[0].pageX,e.pageY||e.changedTouches[0].pageY]}function x(e,t){var n=(e-Ue)/Ue,r=(t-Xe)/Xe;ke[fe]=Math.min(n,0),ke[ve]=Math.max(n,0),ke[ue]=Math.min(r,0),ke[le]=Math.max(r,0)}var D=0,O=1,K=2,T=3,q=D,E=1,F=2,W=3,V=void 0,G=void 0,N=void 0,R=void 0,U=14,X=10,z=void 0,C=0,Y=0,Q=c.getContext("2d"),H=600,Z=480,B=c.cloneNode(),J=B.getContext("2d"),L=c.cloneNode(),_=L.getContext("2d"),$=void 0,ee=void 0,te=void 0,ne=!0,re=0,ae=1,oe=2,ie=3,ce=4,se=5,ue=5,he=6,le=6,fe=7,ve=8,de=9,me=void 0,ye=1,ge=2,we=4,Ae=8,be=31,pe=120,ke=void 0,Me=void 0,Se=void 0,je=void 0,Ie=void 0,Pe=void 0,xe=void 0,De=void 0,Oe=void 0,Ke=n(),Te=n(),qe=n(),Ee="abcdefghijklmnopqrstuvwxyz0123456789.:!-%,/",Fe=0,We=1,Ve=2,Ge=8,Ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVgAAAAICAYAAAC8lecDAAACCUlEQVR42uVa2WoDMQxc6Fvf+v8fmzYlC5vFOmZGsl26EILjlSzrGMuKjq/Pjwf7OV6PN8/SIjJk56rWZOW5y4HKMqKx+GRs48mh0u/4ye6pgmdGP4osGVkRX2R1we7/KH4U/pn4YmX5HVjP+VLH/NUBZq0fjSvWj/iPADZLPxpbOoz0e3eoavoO+6weIzqq0i8yn/WN6J2Mbav2XwmwDO+TztKnLAcaAN0AdP39PwJshf7+6vwKgFxFjyQYUZx4vsHE1z0DrrSfArJeVukBYybDjw6aaH2TvsNBPANWAITF31Jk5gQe8RkZqAKAFYDdOQPsDlCGPuOjqH9E2R8aP1kAZeTP8MgCvOX/Ix4/W0vFf1WGGgFslEEjcRqt//bO7AymM4NlADACWJa/F4DeAXH/3jUDiwAIOQgr/MvSY8UV1rIhkoGyWSQLwKz9UZDx/OUE2ch/kAyRmWfsqwD42/zsK3ZnBsvUMGeXSBT9VK6fqfFVXHEjB1VrfKr+Vflml6CQOKjwP0U/1ywWATkU4NQSgZc0ePXaFDivchAlQHYIAPWKyAKs8ieX18nQVWNkr3AdAGvpb+cDgNGvmqFX2O8Jrl1XcGYeKT14QIrKLbUxrWzTQovYShsO2p4ys80IbbPJtrkorT9Mm47SBqTYv7tNqdsXojawqjaq7vnOEkG6pcrhk9nXiP834OoPrkvjIKMAAAAASUVORK5CYII=";onload=function(e){document.title="A Tourist in Paris",L.width=H,L.height=Z,onresize(),l(Ne).then(function(e){Ne=e,h(!0)})},document.onvisibilitychanged=function(e){h(!e.target.hidden)},onresize=onrotate=function(){var e=Math.min(innerWidth/H,innerHeight/Z);c.width=H*e,c.height=Z*e,[Q,J,_].forEach(function(e){e.mozImageSmoothingEnabled=e.msImageSmoothingEnabled=e.imageSmoothingEnabled=!1}),Ue=innerWidth/2,Xe=innerHeight/2},onkeydown=function(e){switch(e.preventDefault(),q){case K:switch(e.which){case 37:case 65:case 81:ke[fe]=-1;break;case 38:case 90:case 87:ke[ue]=-1;break;case 39:case 68:ke[ve]=1;break;case 40:case 83:ke[le]=1}}},onkeyup=function(e){switch(e.preventDefault(),q){case D:switch(console.log(e.which),e.which){case 69:W=E,q=O;break;case 77:W=F,q=O;break;case 72:W=3,q=O}break;case O:Pe=!0;break;case K:switch(e.which){case 37:case 65:case 81:ke[fe]=0;break;case 38:case 90:case 87:ke[ue]=0;break;case 39:case 68:ke[ve]=0;break;case 40:case 83:ke[le]=0}break;case T:switch(e.which){case 13:case 78:Pe=!0;break;case 82:xe=!0;break;case 84:open("https://twitter.com/intent/tweet?text=I%20just%20visited%20"+Ie+"%20monument"+(Ie>1?"s":"")+"%20in%20A%20Tourist%20In%20Paris,%20a%20%23js13k%20game%20by%20%40herebefrogs%20https%3A%2F%2Fgoo.gl%2FKPNCyr","_blank")}}};var Re=!1,Ue=void 0,Xe=void 0;ontouchstart=onpointerdown=function(e){switch(e.preventDefault(),Re=!0,q){case K:var t=P(e),n=_slicedToArray(t,2);x(n[0],n[1])}},ontouchmove=onpointermove=function(e){switch(e.preventDefault(),q){case K:if(Re){var t=P(e),n=_slicedToArray(t,2);x(n[0],n[1])}}},ontouchend=onpointerup=function(e){switch(e.preventDefault(),Re=!1,q){case D:q=O;break;case O:case T:Pe=!0;break;case K:ke[ue]=0,ke[le]=0,ke[fe]=0,ke[ve]=0}}}();
//# sourceMappingURL=game.js.map</script>