<style>body {
    margin: 0;
    text-align: center;
    background-color: #000;
    touch-action: none;
  }</style><canvas id="c"></canvas><script>function _toArray(e){return Array.isArray(e)?e:Array.from(e)}var _slicedToArray=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(){function e(e,t){return Math.floor(Math.random()*(t+1-e)+e)}function t(t){return t[e(0,t.length-1)]}function r(){return"#"+n()+n()+n()}function n(){for(var t="",r=0;r<2;r++)t+=e(0,9);return t}function i(){return"#"+n()+"0000"}function a(){return"#00"+n()+"00"}function o(){pe=[];for(var e=void 0,r=0;r<N*P;r++)e=0===r?le+ue:r===N-1?he+ue:r===N*(P-1)?le+se:r===N*P-1?he+se:t(r<N-1?[he+le,he+ue+le]:N*(P-1)<r?[he+le,he+se+le]:r%N?r%N==N-1?[se+ue,se+he+ue]:[he+se+le+ue,se+he+ue,se+le+ue,he+se+le,he+ue+le,se+ue,he+le,fe]:[se+ue,se+le+ue]),pe[r]=e}function s(){ye=[];for(var e=0;e<N*P;e++){var t=e%N,n=(e-t)/N;pe[e]!==fe?(ye.push([t*F,n*F,C,C,r(),e]),ye.push([t*F+2*C,n*F,C,C,r(),e]),ye.push([t*F,n*F+2*C,C,C,r(),e]),ye.push([t*F+2*C,n*F+2*C,C,C,r(),e]),pe[e]&se||ye.push([t*F+C,n*F,C,C,r(),e]),pe[e]&he||ye.push([t*F,n*F+C,C,C,r(),e]),pe[e]&ue||ye.push([t*F+C,n*F+2*C,C,C,r(),e]),pe[e]&le||ye.push([t*F+2*C,n*F+C,C,C,r(),e])):ye.push([t*F+C,n*F+C,C,C,i(),e,!1])}}function l(){V&&(Q=requestAnimationFrame(l),f(),L=Date.now(),M((L-O)/1e3),O=L)}function u(e){V=e,V?(O=Date.now(),l()):cancelAnimationFrame(Q)}function h(){Y.drawImage(q,0,0,H,J,0,0,c.width,c.height)}function f(){switch(R){case D:G.fillStyle="white",G.fillRect(0,0,H,J),y("a Tourist in Paris",H/2,112,"64px Arial"),Math.floor(L/1e3)%2&&y("press N or tap screen to start",H/2,J/2),y("proudly made in Canada",H/2,J-80),y("by Jerome Lecomte for JS13KGAMES 2017",H/2,J-48);break;case E:G.fillStyle="white",G.fillRect(0,0,H,J),y("Tourist: person geographically and culturally lost,",24,40,"24px Arial","left"),y("trying to cross iconic sightseeings from his bucket",24,80,"24px Arial","left"),y("list before his tour bus departs.",24,120,"24px Arial","left"),y("Arrow keys, WASD/ZQSD or swipe screen to move.",24,200,"24px Arial","left"),y("Visit all blinking monuments before time runs out.",24,240,"24px Arial","left"),Math.floor(L/1e3)%2&&y("Press any key or tap screen.",24,320,"24px Arial","left");break;case I:var e=!0,t=!1,n=void 0;try{for(var o,c=ye[Symbol.iterator]();!(e=(o=c.next()).done);e=!0){var s=o.value;pe[s[te]]===fe&&(s[ee]=s[ne]?a():i(),v(s,X))}}catch(e){t=!0,n=e}finally{try{!e&&c.return&&c.return()}finally{if(t)throw n}}G.drawImage(K,z,W,H,J,0,0,H,J),ve[ee]=r(),v(ve);var l=Math.floor(Math.ceil(ke)/60),u=Math.ceil(ke)-60*l;y("bus leaving in "+l+":"+(u<=9?"0":"")+u,H-24,40,"24px Arial","right"),y(ge+"/"+me+" monuments visited",24,40,"24px Arial","left");break;case _:G.fillStyle="white",G.fillRect(0,0,H,J),y("You "+(Ae?"won":"lost")+"!",H/2,112,"64px Arial"),y(ge+" out of "+me+" monuments",H/2,J/2,"48px Arial"),y("press R to retry same level",H/2,2*J/3),y("press N or tap screen to start new level",H/2,2*J/3+40),y("press T to share your score on Twitter",H/2,2*J/3+80)}h()}function d(){X.fillStyle="white",X.fillRect(0,0,K.width,K.height);var e=!0,t=!1,r=void 0;try{for(var n,i=ye[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){v(n.value,X)}}catch(e){t=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}}function v(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G;r.fillStyle=e[ee];var n=e[Z]-(e===ve?z:0),i=e[B]-(e===ve?W:0),a=e!==ve&&pe[e[te]]!==fe?t([0,1,2,3,4,5]):0;r.fillRect(Math.round(n-a),Math.round(i-a),e[U]+2*a,e[$]+2*a)}function y(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"24px Arial",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"center",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"black";G.fillStyle=a,G.font=n,G.textAlign=i,G.fillText(e,t,r)}function p(e){var t=e*ve[ce];ve[Z]+=(ve[ae]+ve[oe])*t,ve[B]+=(ve[re]+ve[ie])*t}function m(e){var t=ve[Z]+ve[U],r=ve[B]+ve[$],n=e[Z]+e[U],i=e[B]+e[$];return[ve[Z]<n&&t>e[Z]&&ve[B]<i&&r>e[B],t,r,n,i]}function g(e,t){var r=_slicedToArray(t,4),n=r[0],i=r[1],a=r[2],o=r[3],c=n-e[Z],s=i-e[B],l=a-ve[Z],u=o-ve[B];ve[oe]&&ve[ie]?c<s?ve[Z]-=c:ve[B]-=s:ve[oe]&&ve[re]?c<u?ve[Z]-=c:ve[B]+=u:ve[oe]?ve[Z]-=c:ve[ae]&&ve[ie]?l<s?ve[Z]+=l:ve[B]-=s:ve[ae]&&ve[re]?l<u?ve[Z]+=l:ve[B]+=u:ve[ae]?ve[Z]+=l:ve[ie]?ve[B]-=s:ve[re]&&(ve[B]+=u)}function w(e){pe[e[te]]!==fe||e[ne]||(e[ne]=!0,ge++)}function b(){0<z&&ve[Z]<z+j?z=Math.max(0,ve[Z]-j):z<K.width-H&&ve[Z]+ve[U]>z+H-j&&(z=Math.min(K.width-H,ve[Z]+ve[U]-H+j)),0<W&&ve[B]<W+j?W=Math.max(0,ve[B]-j):W<K.height-J&&ve[B]+ve[$]>W+J-j&&(W=Math.min(K.height-J,ve[B]+ve[$]-J+j))}function A(){ge===me?(R=_,Ae=!0):ke<0&&(R=_,Ae=!1)}function k(){o(),s(),d(),me=pe.reduce(function(e,t){return e+(t===fe?1:0)},0),we=!1,x()}function x(){ye.forEach(function(e){pe[e[te]]===fe&&(e[ne]=!1)}),ge=0,z=W=ve[re]=ve[ie]=ve[ae]=ve[oe]=0,ve[Z]=ve[B]=C,Ae=!1,be=!1,ke=de,R=I}function M(e){switch(R){case _:be&&x();case E:we&&k();break;case I:ke-=e,p(e);var t=!0,r=!1,n=void 0;try{for(var i,a=ye[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,c=m(o),s=_toArray(c),l=s[0],u=s.slice(1);l&&(g(o,u),w(o))}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}b(),A()}}function S(e){return[e.pageX||e.changedTouches[0].pageX,e.pageY||e.changedTouches[0].pageY]}function T(e,t){var r=(e-Me)/Me,n=(t-Se)/Se;ve[ae]=Math.min(r,0),ve[oe]=Math.max(r,0),ve[re]=Math.min(n,0),ve[ie]=Math.max(n,0)}var D=0,E=1,I=2,_=3,R=D,C=80,F=3*C,N=14,P=10,j=200,z=0,W=0,Y=c.getContext("2d"),H=600,J=480,K=c.cloneNode(),X=K.getContext("2d"),q=c.cloneNode(),G=q.getContext("2d"),L=void 0,O=void 0,Q=void 0,V=!0,Z=0,B=1,U=2,$=3,ee=4,te=5,re=5,ne=6,ie=6,ae=7,oe=8,ce=9,se=1,le=2,ue=4,he=8,fe=31,de=120,ve=[C,C,20,20,"blue",0,0,0,0,200],ye=void 0,pe=void 0,me=void 0,ge=void 0,we=void 0,be=void 0,Ae=void 0,ke=void 0;onload=function(e){document.title="A Tourist in Paris",K.width=N*F,K.height=P*F,q.width=H,q.height=J,onresize(),u(!0)},document.onvisibilitychanged=function(e){u(!e.target.hidden)},onresize=onrotate=function(){var e=Math.min(innerWidth/H,innerHeight/J);c.width=H*e,c.height=J*e,[Y,X,G].forEach(function(e){e.mozImageSmoothingEnabled=e.msImageSmoothingEnabled=e.imageSmoothingEnabled=!1}),Me=innerWidth/2,Se=innerHeight/2},onkeydown=function(e){switch(e.preventDefault(),R){case I:switch(e.which){case 37:case 65:case 81:ve[ae]=-1;break;case 38:case 90:case 87:ve[re]=-1;break;case 39:case 68:ve[oe]=1;break;case 40:case 83:ve[ie]=1}}},onkeyup=function(e){switch(e.preventDefault(),R){case D:switch(e.which){case 13:case 78:R=E}break;case E:we=!0;break;case I:switch(e.which){case 37:case 65:case 81:ve[ae]=0;break;case 38:case 90:case 87:ve[re]=0;break;case 39:case 68:ve[oe]=0;break;case 40:case 83:ve[ie]=0}break;case _:switch(e.which){case 13:case 78:we=!0;break;case 82:be=!0;break;case 84:open("https://twitter.com/intent/tweet?text=I%20just%20visited%20"+ge+"%20monument"+(ge>1?"s":"")+"%20in%20A%20Tourist%20In%20Paris,%20a%20%23js13k%20game%20by%20%40herebefrogs%20https%3A%2F%2Fgoo.gl%2FKPNCyr","_blank")}}};var xe=!1,Me=void 0,Se=void 0;ontouchstart=onpointerdown=function(e){switch(e.preventDefault(),xe=!0,R){case I:var t=S(e),r=_slicedToArray(t,2);T(r[0],r[1])}},ontouchmove=onpointermove=function(e){switch(e.preventDefault(),R){case I:if(xe){var t=S(e),r=_slicedToArray(t,2);T(r[0],r[1])}}},ontouchend=onpointerup=function(e){switch(e.preventDefault(),xe=!1,R){case D:R=E;break;case E:case _:we=!0;break;case I:ve[re]=0,ve[ie]=0,ve[ae]=0,ve[oe]=0}}}();
//# sourceMappingURL=game.js.map</script>